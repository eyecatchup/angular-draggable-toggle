/*!**********************************************************************
 *  (c) 2015 Stephan Schmitz <eyecatchup@gmail.com>
 *  Published under the MIT license (http://eyecatchup.mit-license.org).
 *
 *  This copyright notice MUST APPEAR in all copies of the script!
 ***********************************************************************/
!function(e){var t=function(t){var n=e.Toggles=function(e,n){var i=this;if("boolean"==typeof n&&e.data("toggles"))return void e.data("toggles").toggle(n);for(var l=["on","drag","click","width","height","animate","easing","type","checkbox","handleWidth"],o={},s=0;s<l.length;s++){var a=e.data("toggle-"+l[s]);"undefined"!=typeof a&&(o[l[s]]=a)}n=i.opts=t.extend({drag:!0,click:!0,text:{on:"ON",off:"OFF"},on:!1,animate:250,easing:"swing",checkbox:null,clicker:null,handleWidth:100,width:200,height:50,type:"compact",event:"toggle"},n||{},o),i.el=e,e.data("toggles",i),i.selectType="select"===n.type,i.checkbox=t(n.checkbox),n.clicker&&(i.clicker=t(n.clicker)),n.handleWidth&&(i.handleWidth=t(n.handleWidth)),i.createEl(),i.bindEvents(),i.active=!n.on,i.toggle(n.on,!0,!0)};n.prototype.createEl=function(){var e=this,n=e.el.height(),i=e.el.width();n||e.el.height(n=e.opts.height),i||e.el.width(i=e.opts.width),e.h=n,e.w=i,e.sliderInnerWidth=e.w,e.handleWidth=e.opts.handleWidth,e.onOffWidth=e.sliderInnerWidth-e.handleWidth,e.labelWidth=e.onOffWidth/2;var l=function(e){return t('<div class="toggle-'+e+'">')};e.els={slide:l("slide"),inner:l("inner"),on:l("on"),off:l("off"),handle:l("handle")};var o=e.handleWidth,s=e.onOffWidth,a=e.selectType;e.els.on.css({height:n,width:s,textIndent:a?"":s/3,lineHeight:n+"px"}).html(e.opts.text.on),e.els.off.css({height:n,width:s,textIndent:a?"":s/3,lineHeight:n+"px"}).html(e.opts.text.off),e.els.handle.css({height:n,width:o,marginLeft:0}),e.els.inner.css({width:2*i-o,marginLeft:a||e.active?0:-i+o}),e.selectType&&(e.els.slide.addClass("toggle-select"),e.el.css("width",2*s),e.els.handle.hide()),e.els.inner.append(e.els.on,e.els.handle,e.els.off),e.els.slide.html(e.els.inner),e.el.html(e.els.slide)},n.prototype.bindEvents=function(){var e=this,t=function(t){t.target===e.els.handle[0]&&e.opts.drag||e.toggle()};!e.opts.click||e.opts.clicker&&e.opts.clicker.has(e.el).length||e.el.on("click",t),e.opts.clicker&&e.opts.clicker.on("click",t),e.opts.drag&&!e.selectType&&e.bindDrag()},n.prototype.bindDrag=function(){var e,t=this,n=t.onOffWidth/3,i=function(i){if(t.el.off("mousemove"),t.els.slide.off("mouseleave"),t.els.handle.off("mouseup"),!e&&t.opts.click&&"mouseleave"!==i.type)return void t.toggle();var l=t.active?-n>e:e>n;l?t.toggle():t.els.inner.stop().animate({marginLeft:t.active?0:-t.sliderInnerWidth},t.opts.animate/2)},l=-t.w+t.handleWidth;t.els.handle.on("mousedown",function(n){e=0,t.els.handle.off("mouseup"),t.els.slide.off("mouseleave");var o=n.pageX;t.el.on("mousemove",t.els.handle,function(n){e=n.pageX-o;var i;t.active?(i=e,e>0&&(i=0),l>e&&(i=l)):(i=e+l,0>e&&(i=l),e>-l&&(i=0)),t.els.inner.css("margin-left",i)}),t.els.handle.on("mouseup",i),t.els.slide.on("mouseleave",i)})},n.prototype.toggle=function(e,t,n){var i=this;if(i.active!==e){var l=i.active=!i.active;if(i.el.data("toggle-active",l),i.els.off.toggleClass("active",!l),i.els.on.toggleClass("active",l),i.checkbox.prop("checked",l),n||i.el.trigger(i.opts.event,l),!i.selectType){var o=l?0:-i.w+i.handleWidth;i.els.inner.stop().animate({marginLeft:o},t?0:i.opts.animate)}}},t.fn.toggles=function(e){return this.each(function(){new n(t(this),e)})}};"function"==typeof define&&define.amd?define(["jquery"],t):t(e.jQuery||e.Zepto||e.ender||e.$||$)}(this);